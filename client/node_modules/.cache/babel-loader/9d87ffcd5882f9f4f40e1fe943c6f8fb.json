{"ast":null,"code":"import _classCallCheck from\"/Users/amyhaerr/Desktop/books/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/amyhaerr/Desktop/books/client/node_modules/@babel/runtime/helpers/esm/createClass\";import _createSuper from\"/Users/amyhaerr/Desktop/books/client/node_modules/@babel/runtime/helpers/esm/createSuper\";import _inherits from\"/Users/amyhaerr/Desktop/books/client/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import API from\"../../utils/API\";var Results=/*#__PURE__*/function(_Component){_inherits(Results,_Component);var _super=_createSuper(Results);function Results(){var _this;_classCallCheck(this,Results);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={savedBooks:[]};_this.handleSave=function(book){console.log(book);if(_this.state.savedBooks.map(function(book){return book._id;}).includes(book._id)){API.deleteBook(book._id).then(function(deletedBook){return _this.setState({savedBooks:_this.state.savedBooks.filter(function(book){return book._id!==deletedBook._id;})});}).catch(function(err){return console.log(err);});}else{API.saveBook(book).then(function(savedBook){return _this.setState({savedBooks:_this.state.savedBooks.concat([savedBook])});}).catch(function(err){return console.log(err);});}};return _this;}_createClass(Results,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;API.savedBooks().then(function(savedBooks){return _this2.setState({savedBooks:savedBooks});}).catch(function(err){return console.log(err);});}},{key:\"render\",value:function render(){var _this3=this;if(!this.props.books)return null;return/*#__PURE__*/React.createElement(\"div\",null,!this.props.books.length?/*#__PURE__*/React.createElement(\"h1\",{className:\"text-center\"},\"No Results\"):/*#__PURE__*/React.createElement(\"div\",null,this.props.books.map(function(result){return/*#__PURE__*/React.createElement(\"div\",{className:\"card mb-3\",key:result._id},/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-2\"},/*#__PURE__*/React.createElement(\"img\",{alt:result.title,className:\"img-fluid\",src:result.image})),/*#__PURE__*/React.createElement(\"div\",{className:\"col-md-10\"},/*#__PURE__*/React.createElement(\"div\",{className:\"card-body\"},/*#__PURE__*/React.createElement(\"h5\",{className:\"card-title\"},result.title,\" by \",result.authors),/*#__PURE__*/React.createElement(\"p\",{className:\"card-text\"},result.description),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{href:result.link,className:\"btn\",target:\"_blank\"},\"View\"),/*#__PURE__*/React.createElement(\"button\",{onClick:function onClick(){return _this3.handleSave(result);},className:\"btn\"},_this3.state.savedBooks.map(function(book){return book._id;}).includes(result._id)?\"Unsave\":\"Save\"))))));})));}}]);return Results;}(Component);export default Results;","map":{"version":3,"sources":["/Users/amyhaerr/Desktop/books/client/src/components/Results/index.js"],"names":["React","Component","API","Results","state","savedBooks","handleSave","book","console","log","map","_id","includes","deleteBook","then","deletedBook","setState","filter","catch","err","saveBook","savedBook","concat","props","books","length","result","title","image","authors","description","link"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport API from \"../../utils/API\";\n\nclass Results extends Component {\n  state = {\n    savedBooks: [],\n  };\n  componentDidMount() {\n    API.savedBooks()\n      .then((savedBooks) => this.setState({ savedBooks: savedBooks }))\n      .catch((err) => console.log(err));\n  }\n\n  handleSave = (book) => {\n    console.log(book)\n    if (this.state.savedBooks.map((book) => book._id).includes(book._id)) {\n      API.deleteBook(book._id)\n        .then((deletedBook) =>\n          this.setState({\n            savedBooks: this.state.savedBooks.filter(\n              (book) => book._id !== deletedBook._id\n            ),\n          })\n        )\n        .catch((err) => console.log(err));\n    } else {\n      API.saveBook(book)\n        .then((savedBook) =>\n          this.setState({\n            savedBooks: this.state.savedBooks.concat([savedBook]),\n          })\n        )\n        .catch((err) => console.log(err));\n    }\n  };\n\n  render() {\n    if (!this.props.books)\n    return(null)\n    return (\n      <div>\n        {!this.props.books.length ? (\n          <h1 className=\"text-center\">No Results</h1>\n        ) : (\n          <div>\n            {this.props.books.map((result) => (\n              <div className=\"card mb-3\" key={result._id}>\n                <div className=\"row\">\n                  <div className=\"col-md-2\">\n                    <img\n                      alt={result.title}\n                      className=\"img-fluid\"\n                      src={result.image}\n                    />\n                  </div>\n                  <div className=\"col-md-10\">\n                    <div className=\"card-body\">\n                      <h5 className=\"card-title\">\n                        {result.title} by {result.authors}\n                      </h5>\n                      <p className=\"card-text\">{result.description}</p>\n                      <div>\n                        <a href={result.link} className=\"btn\" target=\"_blank\">\n                          View\n                        </a>\n                        <button\n                          onClick={() => this.handleSave(result)}\n                          className=\"btn\"\n                        >\n                          {this.state.savedBooks\n                            .map((book) => book._id)\n                            .includes(result._id)\n                            ? \"Unsave\"\n                            : \"Save\"}\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default Results;"]},"metadata":{},"sourceType":"module"}